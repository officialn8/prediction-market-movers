# Prediction Market Movers - Environment Configuration
# Copy to .env and fill in values

# =============================================================================
# DATABASE
# =============================================================================
DATABASE_URL=postgresql://user:password@localhost:5432/prediction_movers

# Connection pool settings (adjust based on your Postgres limits)
DB_POOL_MIN_SIZE=2
DB_POOL_MAX_SIZE=10
DB_CONNECTION_TIMEOUT=30.0

# =============================================================================
# COLLECTOR
# =============================================================================
# Mode: "simulated" | "polymarket" | "live" (polymarket + kalshi)
COLLECTOR_MODE=polymarket

# Sync interval in seconds (for REST fallback)
COLLECTOR_INTERVAL_SECONDS=30

# =============================================================================
# WEBSOCKET (Real-time)
# =============================================================================
# Use WebSocket for real-time Polymarket data (recommended)
POLYMARKET_USE_WSS=true

# Watchdog timeout - restart WSS if no messages for this many seconds
WSS_WATCHDOG_TIMEOUT=120

# Delay before reconnecting after WSS disconnect
WSS_RECONNECT_DELAY=5

# =============================================================================
# DATA RETENTION
# =============================================================================
# Days to keep snapshot data (older data is pruned daily)
SNAPSHOT_RETENTION_DAYS=7

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=INFO

# =============================================================================
# BETTER AUTH (Authentication)
# =============================================================================
# Secret for session encryption (generate with: openssl rand -base64 32)
BETTER_AUTH_SECRET=change-me-in-production

# Base URL of your app (used for OAuth callbacks)
BETTER_AUTH_URL=http://localhost:3000

# Also set this for Next.js client
NEXT_PUBLIC_APP_URL=http://localhost:3000

# =============================================================================
# SOCIAL LOGIN (Optional)
# =============================================================================
# GitHub OAuth (https://github.com/settings/developers)
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# Google OAuth (https://console.cloud.google.com/apis/credentials)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# =============================================================================
# LEGACY API AUTH (Can be removed once BetterAuth is live)
# =============================================================================
# JWT secret for auth tokens (generate with: openssl rand -hex 32)
JWT_SECRET=change-me-in-production

# Frontend URL for redirects
FRONTEND_URL=http://localhost:3000

# =============================================================================
# KALSHI (WebSocket - Real-time)
# =============================================================================
# Enable Kalshi WebSocket for sub-millisecond data (requires API key)
# This is the BIGGEST accuracy improvement vs REST polling!
# Get API keys at: https://kalshi.com/account/api-keys
KALSHI_USE_WSS=false

# API key ID from Kalshi
KALSHI_API_KEY=

# Path to RSA private key file (downloaded from Kalshi)
# OR set KALSHI_PRIVATE_KEY with the PEM content directly
KALSHI_PRIVATE_KEY_PATH=./kalshi_private.pem
# KALSHI_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\n...\n-----END RSA PRIVATE KEY-----"

# =============================================================================
# POLAR (Billing - Merchant of Record)
# =============================================================================
# Get from: https://polar.sh/settings → Organization Access Tokens
POLAR_ACCESS_TOKEN=polar_oat_...

# Get from: https://polar.sh/settings → Webhooks → Your endpoint → Secret
POLAR_WEBHOOK_SECRET=whsec_...

# Product IDs from your Polar dashboard (Products → Copy ID)
POLAR_PRO_PRODUCT_ID=prod_...
POLAR_ENTERPRISE_PRODUCT_ID=prod_...
